{% extends "_layout.html" %}
{% block page_title %}Dataset Management{% endblock page_title %}

{% block header %}
   Dataset Management
{% endblock header %}

{% block control-btns %}
    <a class="pull-right" href="{% url 'datasets:dataset-create' %}">
        <button class="btn btn-default btn-sm"><span class="glyphicon glyphicon-plus"></span> New Dataset</button>
    </a>
{% endblock control-btns %}

{% block content %}
{% with noHorizontalRule=True %}
{{ block.super }}
{% endwith %}

    <table class="table list">

    {% for dataset in object_list %}

        <tr>
            <td>
                <h4>
                    <a href="{% url 'datasets:dataset-detail' dataset.id %}">{{ dataset.name }}</a>
                </h4>
                <div class="col-sm-offset-1">
                    <h5 class="text-muted">Updated {{ dataset.modified_at|timesince }} ago</h5>
                    <h5 class="item-description">{{ dataset.description|truncatechars:250 }}</h5>
                </div>
            </td>
            <td class="vcenter">
                {% if dataset.choropleth %}

                    <a class="else" href="{% url 'choropleths:choropleth-view' dataset.choropleth.id %}">
                        <button class="btn btn-primary btn-sm">
                            <span class="glyphicon glyphicon-eye-open"></span>&nbsp;Choropleth
                        </button>
                    </a>

                {% else %}

                    <a href="{% url 'choropleths:choropleth-create' dataset.id %}">
                        <button class="btn btn-success btn-sm">
                            <span class="glyphicon glyphicon-plus"></span>&nbsp;Create Choropleth
                        </button>
                    </a>

                {% endif %}
            </td>
        </tr>

        {% endfor %}

    </table>

    {% include 'partials/pagination.html' %}

{% endblock content %}
